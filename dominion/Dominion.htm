<!DOCTYPE html>
<html>
    <head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<div id="TickerDiv" style="position:absolute; top:8px; left:252px; z-index:1">
		<canvas id="TickerCanvas" width="640" height="30"></canvas>
	</div>
	<div id="PrimeDiv" style="position:absolute; top:42px; left:252px; z-index:2">
		<canvas id="PrimeCanvas" width="640" height="640"></canvas>
	</div>
	<div id="ZoomDiv" style="position:absolute; top:8px; left:896px; z-index:3">
		<canvas id="ZoomCanvas" width="240" height="444"></canvas>
	</div>
	<div id="ConsoleDiv" style="position:absolute; top:456px; left:896px; z-index:4">
		<canvas id="ConsoleCanvas" width="240" height="156"></canvas>
	</div>
	<div id="HelpDiv" style="position:absolute; top:8px; left:8px; z-index:5">
		<canvas id="HelpCanvas" width="240" height="675"></canvas>
	</div>
    </head>

    <button type="button" id="StartButton"	onclick="EventHandler(0)">Start</button>
    <button type="button" id="LoadButton"	onclick="EventHandler(1)">Load</button>
    <button type="button" id="SaveButton"	onclick="EventHandler(2)">Save</button>
    <button type="button" id="TestButton"	onclick="EventHandler(3)">Test</button>
    <button type="button" id="ExpandButton"	onclick="EventHandler(4)">Expand</button>
    <button type="button" id="FullScreenButton" onclick="EventHandler(5)">Full Screen</button>
    <button type="button" id="SettingsButton"	onclick="EventHandler(6)">Settings</button>

    <body onload="RunDominion()">

	<!-- Data -->
	<script src="..\library\GenieData.js"></script>
	<script src="..\library\data\Consts.js"></script>
	<script src="..\library\data\Colours.js"></script>
	<script src="..\library\data\Geo.js"></script>
	<script src="..\library\data\IO.js"></script>
	<script src="..\library\data\Controls.js"></script>
	<script src="..\library\data\Images.js"></script>
	<script src="..\library\data\Sprites.js"></script>
	<script src="..\library\data\Agents.js"></script>
	<script src="..\library\data\Weapons.js"></script>

	<!-- Types -->
	<script src="..\library\GenieTypes.js"></script>
	<script src="..\library\GenieArray.js"></script>
	<script src="..\library\GenieList.js"></script>
	<script src="..\library\AgentArray.js"></script>

	<!-- Utilities -->
	<script src="..\library\GenieUtils.js"></script>
	<script src="..\library\utils\ArrayUtils.js"></script>
	<script src="..\library\utils\BitUtils.js"></script>
	<script src="..\library\utils\GeoUtils.js"></script>
	<script src="..\library\utils\SpaceUtils.js"></script>
	<script src="..\library\utils\StringUtils.js"></script>

	<!-- Controls -->
	<script src="..\library\GenieControl.js"></script>
	<script src="..\library\controls\GenieButton.js"></script>
	<script src="..\library\controls\TextButton.js"></script>
	<script src="..\library\controls\ImageButton.js"></script>
	<script src="..\library\controls\PushButton.js"></script>
	<script src="..\library\controls\ButtonPanel.js"></script>
	<script src="..\library\controls\GenieIcon.js"></script>
	<script src="..\library\controls\IconPanel.js"></script>
	<script src="..\library\controls\GenieCheckBox.js"></script>
	<script src="..\library\controls\GenieTouchBar.js"></script>
	<script src="..\library\controls\GenieBarChart.js"></script>
	<script src="..\library\controls\GeniePieChart.js"></script>
	<script src="..\library\controls\GenieGauge.js"></script>
	<script src="..\library\controls\GenieRadio.js"></script>
	<script src="..\library\controls\LinearGauge.js"></script>
	<script src="..\library\controls\TimeMeter.js"></script>
	<script src="..\library\controls\ImagePanel.js"></script>
	<script src="..\library\controls\GenieCarousel.js"></script>

	<!-- Objects -->
	<script src="..\library\MobileObject.js"></script>
	<script src="..\library\GenieBuffer.js"></script>
	<script src="..\library\DiplomacyTable.js"></script>
	<script src="..\library\GenieSpectrum.js"></script>
	<script src="..\library\objects\GenieCalendar.js"></script>

	<!-- Tools -->
	<script src="..\library\GenieGraphics.js"></script>
	<script src="..\library\GenieCalcPad.js"></script>
	<script src="..\library\GenieText.js"></script>
	<script src="..\library\GenieRandom.js"></script>
	<script src="..\library\ScreenManager.js"></script>
	<script src="..\library\GenieColourizer.js"></script>

	<!-- Graphics -->
	<script src="..\library\GenieImage.js"></script>
	<script src="..\library\ImageMap.js"></script>
	<script src="..\library\GenieShape.js"></script>
	<script src="..\library\shapes\GenieLine.js"></script>
	<script src="..\library\shapes\GenieRectangle.js"></script>
	<script src="..\library\shapes\GenieOctagon.js"></script>
	<script src="..\library\shapes\GeniePolygon.js"></script>
	<script src="..\library\shapes\GenieTrapezoid.js"></script>

	<!-- Sprites -->
	<script src="..\library\GenieSprite.js"></script>
	<script src="..\library\sprites\AnimatedSprite.js"></script>
	<script src="..\library\sprites\GeometricSprite.js"></script>
	<script src="..\library\sprites\CompositeSprite.js"></script>
	<script src="..\library\sprites\AnimatedCompositeSprite.js"></script>

	<!-- Agents -->
	<script src="..\library\GenieAgent.js"></script>
	<script src="..\library\agent\Draw.js"></script>
	<script src="..\library\agent\Update.js"></script>
	<script src="..\library\agent\Turn.js"></script>
	<script src="..\library\agent\Space.js"></script>
	<script src="..\library\agent\Collision.js"></script>

	<!-- FX -->
	<script src="..\library\FXList.js"></script>
	<script src="..\library\GenieFX.js"></script>
	<script src="..\library\FX\GenieProjectile.js"></script>

	<!-- Interface -->
	<script src="..\library\GenieMouse.js"></script>
	<script src="..\library\GenieKeyboard.js"></script>
	<script src="..\library\GenieGamepad.js"></script>

	<!-- Framework -->
	<script src="..\library\ImageManager.js"></script>
	<script src="..\library\GenieCanvas.js"></script>
	<script src="..\library\GenieScape.js"></script>
	<script src="..\library\GenieView.js"></script>
	<script src="..\library\views\SubView.js"></script>
	<script src="..\library\views\NestedView.js"></script>
	<script src="..\library\views\Dialog.js"></script>
	<script src="..\library\views\OptionsDialog.js"></script>
	<script src="..\library\GenieIntro.js"></script>
	<script src="..\library\GenieGame.js"></script>

	<!-- data -->
	<script src="data.js"></script>
	<script src="data\daily.js"></script>
	<script src="data\html.js"></script>
	<script src="data\names.js"></script>
	<script src="data\colours.js"></script>
	<script src="data\nations.js"></script>
	<script src="data\map.js"></script>
	<script src="data\controls.js"></script>
	<script src="data\imagemaps.js"></script>
	<script src="data\images.js"></script>
	<script src="data\sprites.js"></script>
	<script src="data\agents.js"></script>
	<script src="data\views.js"></script>
	<script src="data\theatres.js"></script>

	<script src="types.js"></script>

	<!-- advice -->
	<script src="advice\intro.js"></script>
	<script src="advice\investing.js"></script>

	<!-- help -->
	<script src="help\intro.js"></script>
	<script src="views\sub\documentation.js"></script>
	<script src="views\guide.js"></script>
	<script src="views\sub\guide.js"></script>
	<script src="views\guide\overview.js"></script>
	<script src="views\guide\map.js"></script>

	<script src="utils.js"></script>

	<!-- controls -->
	<script src="controls\day.js"></script>
	<script src="controls\fortnight.js"></script>
	<script src="controls\map.js"></script>
	<script src="controls\speed.js"></script>

	<!-- combatants -->
	<script src="unit.js"></script>
	<script src="units\combatant.js"></script>
	<script src="units\combatants\LART.js"></script>
	<script src="units\combatants\MART.js"></script>
	<script src="units\combatants\HART.js"></script>
	<script src="units\combatants\jeep.js"></script>
	<script src="units\combatants\howitzer.js"></script>
	<script src="units\combatants\APC.js"></script>
	<script src="units\combatants\AV.js"></script>
	<script src="units\combatants\IFV.js"></script>

	<!-- jets -->
	<script src="units\jet.js"></script>
	<script src="units\jets\bomber.js"></script>
	<script src="units\jets\fighter.js"></script>
	<script src="units\jets\interdictor.js"></script>

	<!-- fx -->
	<script src="FX\ward.js"></script>
	<script src="FX\AAM.js"></script>

	<script src="draft.js"></script>

	<!-- characters -->
	<script src="characters\generator.js"></script>
	<script src="characters\character.js"></script>
	<script src="characters\adviser.js"></script>

	<!-- assets -->
	<script src="assets\bond.js"></script>
	<script src="assets\investment.js"></script>

	<!-- maps -->
	<script src="map.js"></script>
	<script src="maps\continent.js"></script>
	<script src="maps\atoll.js"></script>
	<script src="maps\world.js"></script>
	<script src="maps\province.js"></script>
	<script src="maps\city.js"></script>
	<script src="maps\street.js"></script>

	<!-- nations -->
	<script src="nation.js"></script>
	<script src="nations\power.js"></script>
	<script src="nations\allied.js"></script>
	<script src="nations\allied\alliance.js"></script>
	<script src="nations\citystate.js"></script>
	<script src="nations\city.js"></script>

	<!-- government -->
	<script src="government.js"></script>
	<script src="government\anarchy.js"></script>
	<script src="government\democracy.js"></script>
	<script src="government\dictatorship.js"></script>
	<script src="government\federation.js"></script>
	<script src="government\feudalism.js"></script>
	<script src="government\marxism.js"></script>
	<script src="government\monarchy.js"></script>
	<script src="government\republic.js"></script>
	<script src="government\theocracy.js"></script>
	<script src="government\commonwealth.js"></script>
	<script src="government\cabinet.js"></script>

	<!-- ministries -->
	<script src="government\ministry.js"></script>
	<script src="government\agriculture.js"></script>
	<script src="government\culture.js"></script>
	<script src="government\defence.js"></script>
	<script src="government\energy.js"></script>
	<script src="government\foreign.js"></script>
	<script src="government\health.js"></script>
	<script src="government\industry.js"></script>
	<script src="government\information.js"></script>

	<!-- alliances -->
	<script src="alliances\alliance.js"></script>

	<!-- military -->
	<script src="military\army.js"></script>
	<script src="military\airforce.js"></script>
	<script src="military\navy.js"></script>
	<script src="military\missilery.js"></script>
	<script src="military\fleet.js"></script>

	<!-- views -->
	<script src="views\alliance.js"></script>
	<script src="views\auction.js"></script>

	<!-- conquest -->
	<script src="views\conquest.js"></script>
	<script src="views\conquest\info.js"></script>
	<script src="views\conquest\console.js"></script>
	<script src="views\conquest\air.js"></script>
	<script src="views\conquest\land.js"></script>
	<script src="views\conquest\sea.js"></script>
	<script src="views\fleet.js"></script>

	<!-- expansion views -->
	<script src="views\purchase.js"></script>
	<script src="views\grant.js"></script>
	<script src="views\sub\investment.js"></script>
	<script src="views\pact.js"></script>
	<script src="views\treaty.js"></script>
	<script src="views\intrigue.js"></script>

	<!-- inventory views -->
	<script src="views\assets.js"></script>
	<script src="views\bonds.js"></script>
	<script src="views\forces.js"></script>
	<script src="views\investment.js"></script>

	<script src="views\global.js"></script>
	<script src="views\sub\gazetteer.js"></script>
	<script src="views\sub\votes.js"></script>
	<script src="views\sub\budget.js"></script>
	<script src="views\sub\reserves.js"></script>
	<script src="views\sub\relations.js"></script>
	<script src="views\sub\cash.js"></script>
	<script src="views\sub\arms.js"></script>
	<script src="views\sub\events.js"></script>
	<script src="views\sub\action.js"></script>

	<!-- intro -->
	<script src="views\intro.js"></script>
	<script src="views\intro\data.js"></script>
	<script src="views\intro\open.js"></script>
	<script src="views\intro\start.js"></script>
	<script src="views\intro\info.js"></script>
	<script src="views\intro\character.js"></script>
	<script src="views\intro\past.js"></script>

	<!-- turn -->
	<script src="views\solicitation.js"></script>
	<script src="views\sub\solicitation.js"></script>
	<script src="views\sub\inventory.js"></script>
	<script src="views\expansion.js"></script>
	<script src="views\sub\advice.js"></script>
	<script src="views\sub\turn.js"></script>
	<script src="views\newspaper.js"></script>
	<script src="views\choice.js"></script>
	<script src="views\sub\choice.js"></script>

	<script src="views\missions.js"></script>
	<script src="views\selection.js"></script>

	<!-- missions -->
	<script src="missions\air.js"></script>
	<script src="missions\blockade_old.js"></script>
	<script src="missions\blockade.js"></script>
	<script src="missions\champions.js"></script>
	<script src="missions\interdiction.js"></script>
	<script src="missions\sabotage.js"></script>

	<!-- office -->
	<script src="views\office.js"></script>
	<script src="views\sub\office.js"></script>
	<script src="views\office\item.js"></script>
	<script src="views\office\bank.js"></script>
	<script src="views\office\cabinet.js"></script>
	<script src="views\office\calculator.js"></script>
	<script src="views\office\calendar.js"></script>
	<script src="views\office\clock.js"></script>
	<script src="views\office\folders.js"></script>
	<script src="views\office\globe.js"></script>
	<script src="views\office\laptop.js"></script>
	<script src="views\office\monitor.js"></script>
	<script src="views\office\newspaper.js"></script>
	<script src="views\office\pda.js"></script>
	<script src="views\office\phone.js"></script>
	<script src="views\office\remote.js"></script>

	<!-- theatres -->
	<script src="theatre.js"></script>
	<script src="theatres\land.js"></script>
	<script src="theatres\beachhead.js"></script>
	<script src="theatres\sea.js"></script>

	<!-- components -->
	<script src="components.js"></script>
	<script src="components\data.js"></script>
	<script src="components\core.js"></script>
	<script src="components\images.js"></script>
	<script src="components\sprites.js"></script>
	<script src="components\agents.js"></script>
	<script src="components\FX.js"></script>
	<script src="components\views.js"></script>

	<script src="demo.js"></script>

	<script src="tutorial.js"></script>

	<script src="minigames.js"></script>
	<script src="minigames\interdiction.js"></script>
	<script src="minigames\alliances.js"></script>

	<script src="intro.js"></script>

	<!-- testing -->
	<script src="testing.js"></script>
	<script src="testing\interdictor.js"></script>
	<script src="testing\map.js"></script>
	<script src="testing\name.js"></script>
	<script src="testing\allieds.js"></script>
	<script src="testing\beam.js"></script>
	<script src="testing\random.js"></script>
	<script src="testing\duel.js"></script>
	<script src="testing\bits.js"></script>
	<script src="testing\carousel.js"></script>
	<script src="testing\rolling.js"></script>

	<script src="oNations.js"></script>

	<script>

	    //Main game object
	    var Game;

	    function RunDominion() {

		//Create library components
		DominionScape = new GenieScape();
		DominionCalcPad = new GenieCalcPad();
		DominionGraphics = new GenieGraphics();
		DominionText = new GenieText();
		DominionRandomizer = new GenieRandomizer();

		//Set library components
		DominionScape.Set("PrimeCanvas", "ZoomCanvas", "ConsoleCanvas", "TickerCanvas", "HelpCanvas", DominionControls);
		DominionCalcPad.Set();
		DominionGraphics.Set(DominionScape.Screen, DominionScape.InfoBox, DominionScape.ControlPanel, DominionScape.TickerTape, DominionScape.Tabloid);
		DominionGraphics.SetCalcPad(DominionCalcPad);
		DominionText.Set(DominionScape.Screen, null, DominionScape.InfoBox, DominionScape.ControlPanel, DominionScape.TickerTape, DominionScape.Tabloid);
		DominionScape.PrimeScape.Context.font = FONT.DEFAULT;
		DominionScape.AddController(GAMePAD.ARROWS);
		Controller = DominionScape.ControllerA;
		DominionRandomizer.Set();

		//Load and assign graphic images
		ImageManager.Set(DominionImages);
		ImageManager.LoadImages();
		ImageManager.Check();				//Check if images have loaded

		//Begin as soon as images have loaded
		Game = new OctagonalNations();
		Game.Set(DominionScape, DominionGraphics, DominionCalcPad, DominionText, DominionRandomizer, Controller);
		Game.CheckImagesLoaded();
	    }

	    function EventHandler(EventNumber) {
		cancelAnimationFrame(Intro.AnimationFrameHandle);
		cancelAnimationFrame(GlobalView.AnimationFrameHandle);
		switch (EventNumber) {
		    case EVENT.STARtBUTTOnCLICKED:
			if (Game.CheckPaused()) {
			    Game.Settings -= GAME.STATE.PAUSED;
			    document.getElementById("StartButton").innerHTML = "Pause";
			} else {
			    Game.Settings += GAME.STATE.PAUSED;
			    document.getElementById("StartButton").innerHTML = "Start";
			}
			break;
		    case EVENT.LOAdBUTTOnCLICKED:
//		  alert("Sorry - not yet implemented");
			document.getElementById("PrimeCanvas").style.cursor = "auto";
			break;
		    case EVENT.SAVeBUTTOnCLICKED:
			document.getElementById("PrimeCanvas").style.cursor = "url(swords.cur), auto";
			break;
		    case EVENT.TEStBUTTOnCLICKED:
			Intro.HideButtons();
			Testing.Start();
			break;
		    case EVENT.EXPANdBUTTOnCLICKED:
			if (Game.CheckExpanded()) {
			    DominionScape.Contract();
			    Game.Settings -= GAME.SCREEN.EXPANDED;
			    document.getElementById("StartButton").innerHTML = "Expand";
			} else {
			    DominionScape.Expand();
			    Game.Settings += GAME.STATE.PAUSED;
			    document.getElementById("StartButton").innerHTML = "Contract";
			}
			break;
		    case EVENT.FULlSCREEnBUTTOnCLICKED:
			if (Game.CheckFullScreen()) {
			    DominionScape.SetBrowserSize();
			    Game.Settings -= GAME.SCREEN.FULL;
			    document.getElementById("StartButton").innerHTML = "Expand";
			} else {
			    DominionScape.SetFullScreen();
			    Game.Settings += GAME.STATE.FULL;
			    document.getElementById("StartButton").innerHTML = "Contract";
			}
			break;
		    case EVENT.SETTINGsBUTTOnCLICKED:
			break;
		}
	};

	</script>
    </body>
</html>
